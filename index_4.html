
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <link rel="stylesheet" href="css/styles.css" type="text/css" media="screen"/>
    <link rel="alternate" type="application/rss+xml" title="ExoMemory" href="http://steveliles.github.com/rss.xml" />
    <link href='http://fonts.googleapis.com/css?family=Gochi+Hand' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono:700' rel='stylesheet' type='text/css'>
    <meta name="description" content="Thoughts on Java, GWT, programming, and other geek stuff"></meta>
    <script type="text/javascript" src="google-analytics.js"></script>
    <title>Steve Liles' Blog</title>
  </head>
  <body>
    <div>
      <div class="site-header">
        <div class="left">
          <a href="/index.html"><h1>ExoMemory</h1></a>
          <h2>Because I'll forget it if I don't write it down...</h2>
        </div>
        <div class="right">
	  <a rel="author" href="http://steveliles.github.com/about_me.html"><img src="images/lego.png"></a>
        </div>
      </div>
      <div class="nav">
        <span>
          <a rel="me" href="https://plus.google.com/105248011271585565954"><img src="http://www.google.com/images/icons/ui/gprofile_button-16.png" width="16" height="16"></a>
          <a rel="me" href="http://www.twitter.com/steveliles"><img src="http://twitter-badges.s3.amazonaws.com/t_mini-a.png" alt="Follow steveliles on Twitter"></a>
	  <a rel="me" href="http://uk.linkedin.com/in/steveliles"><img src="http://www.linkedin.com/img/webpromo/btn_in_20x15.png" width="20" height="15" alt="View my LinkedIn profile"></a>
	  <form action="http://www.google.com/search" method="get">
            <input type="hidden" name="q" value="site:steveliles.github.com">
            <input type="text" name="q" placeholder="search"></input>
          </form>
	  <a href="rss.xml"><img src="images/rss.png" width="16" height="16" alt="Subscribe to RSS feed"></a>
        </span>
      </div>
      <div class="content">
        <div class="main">
	    <div class="article" itemscope itemtype="http://schema.org/BlogPosting" inLanguage="en-GB" isFamilyFriendly="true" wordCount="513" description="Step-by-step run through of setting up an Amazon S3 bucket as a static web-site">
              <span class="meta" itemprop="datePublished"><time datetime="2011-11-26">November 26, 2011</time></span>
              <a itemprop="url" href="hosting_a_static_website_in_amazon_s3.html"><h1 itemprop="name" itemprop="headline">Hosting a static website in Amazon S3</h1></a>
	      <span itemprop="articleBody"><p>Amazon Simple Storage Service - S3 - can be used to host a static web-site, but it isn't immediately obvious how to set this up. Here's how I did it (I'm using the standard AWS console for this):</p>

<h4>Step-1: If you haven't already, sign up for Amazon S3</h4>

<h4>Step-2: Log-in to the AWS console, and go to the S3 Tab</h4>

<h4>Step-3: Create an S3 bucket:</h4>

<p>It doesn't really matter what name you give your bucket unless you plan to <a href="pointing_a_domain_name_to_an_amazon_s3_bucket.html">forward a domain name to your S3 hosted site</a> </p>

<p><img src="https://lh6.googleusercontent.com/-ntmu1ROjx_k/TtEulvLq2qI/AAAAAAAAHy0/kAz8dljKeMU/s578/create-bucket.png" alt="Create a bucket" /></p>

<h4>Step-4: Upload your static site to the bucket</h4>

<p>Select your bucket in the "Buckets" pane, then right-click in the "Objects and Folders" pane and choose "upload". If you are uploading many folders you'll probably want to use the "enhanced" uploader applet.</p>

<h4>Step-5: Set your bucket to be a website:</h4>

<p>First, right-click on your bucket in the "Buckets" pane (far left) and choose "Properties".</p>

<p><img src="https://lh6.googleusercontent.com/-5qHHItMStOU/TtEumMeQGeI/AAAAAAAAHzA/3HSscD7aFr0/s426/bucket-properties.png" alt="Open Bucket Properties" /></p>

<p>The properties of your bucket will appear in the "Properties" pane at the bottom of the screen.</p>

<p><img src="https://lh3.googleusercontent.com/-4B_VhzIeRjw/TtEzQSqQdUI/AAAAAAAAHzY/EcMc-2ruk98/s600/bucket-properties-tabs.png" alt="Bucket Properties" /></p>

<p>In the bucket propertes go to the "Website" tab. Make sure to:</p>

<ol>
<li>Check the "enabled" box</li>
<li>Enter the name of an "index document" in the box (this will be page that should be loaded if someone visits the root of your bucket - websites typically us index.html).</li>
<li>Note the "endpoint" url - this will be the url to your website.</li>
</ol>

<p><img src="https://lh4.googleusercontent.com/-poLROP8Apoc/TtE1Fn9kH2I/AAAAAAAAH0M/XQJ1XrGLoS8/s600/bucket-properties-website.png" alt="Bucket Properties Website Tab" /></p>

<p>If you open the endpoint url in a separate tab in your browser now you will see permission denied errors, so lets fix that...</p>

<h4>Step-6: Make your web-site accessable to viewers:</h4>

<ol>
<li>Still in the bucket "Properties" pane, open the "Permissions" tab and click "Edit Bucket Policy" - a window pops up.</li>
<li>Paste in the code from the box below, replacing <code>mybucketname</code> with, well, your bucket name :)</li>
<li>Click <code>save</code> and your done - go visit that end-point url which should now be hosting your static website :)</li>
</ol>

<p>Here's the permissions policy you need - don't forget to change <code>mybucketname</code>!</p>

<pre><code>{
    "Version": "2008-10-17",
    "Statement": [{
        "Sid": "PublicReadForGetBucketObjects",
        "Effect": "Allow",
        "Principal": {
            "AWS": "*"
        },
        "Action": "s3:GetObject",
        "Resource": "arn:aws:s3:::mybucketname/*"
    }]
}
</code></pre>

<p><img src="https://lh5.googleusercontent.com/-loUsJEs3JC4/TtEulGDjuEI/AAAAAAAAHyw/Q1QYKwZY5WQ/s600/bucket-policy-edit.png" alt="Edit Bucket Policy" /></p>

<h4>Step-7: Registered a domain-name? Point it at your S3 hosted website...</h4>

<p>See my other post on <a href="pointing_a_domain_name_to_an_amazon_s3_bucket.html">how to forward a domain name to an S3 bucket</a>.</p>
</span>

              <ul class="keywords">
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=static">static</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=website">website</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=amazon">amazon</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=S3">S3</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=hosting">hosting</a></li>
              </ul>
              <div style="clear:both"></div>

	        <a href="hosting_a_static_website_in_amazon_s3.html">Comment on this post</a>

            </div>
	    <div class="article" itemscope itemtype="http://schema.org/BlogPosting" inLanguage="en-GB" isFamilyFriendly="true" wordCount="637" description="My travails with getting google to use the microformat, rich-snippets and rel=author information on my blog">
              <span class="meta" itemprop="datePublished"><time datetime="2011-11-24">November 24, 2011</time></span>
              <a itemprop="url" href="microformats_rich_snippets_rel_author_and_search_listings.html"><h1 itemprop="name" itemprop="headline">Microformats, rich snippets, rel=author, and search listings</h1></a>
	      <span itemprop="articleBody"><p>Whilst moving my blog from Blogger to github pages I've been looking into various ways to bump up my traffic. </p>

<p>I came across <a href="http://schema.org">schema.org</a> microformats some time ago and read about plans from Google, Yahoo and Microsoft to support them. I implemented the <a href="http://schema.org/BlogPosting">BlogPosting</a> microformat to mark up my posts "semantically", and waited to see what google would make of it.</p>

<p>I admit, I was pretty excited at the thought of my search listings being presented in a more interesting fashion - I think that would really make them stand out. Here's an example of what Google's "rich snippets" testing tool makes of my articles:</p>

<p><img src="https://lh5.googleusercontent.com/-svXxV_v3GEM/Ts7iHUCNneI/AAAAAAAAHyY/lpTiC3ZKFI0/s867/rich-snippets.png" alt="rich snippets info for one of my blog posts" /></p>

<p>Unfortunately to-date it hasn't made a great deal of difference to how my posts are presented in a google search result.</p>

<p><img src="https://lh6.googleusercontent.com/-56_YwrdGwv4/Ts7VbPtTwHI/AAAAAAAAHw8/s__A_feIMnY/s600/search-listing.png" alt="google search listing" /></p>

<p>The first result in that listing image is for my blog. The only difference I see is that my blog result shows a date (which is nice, but I'm not sure its there because of the rich snippets markup - my old blogger blog shows dates like this too, and currently has no metadata markup that I can spot in the html source).</p>

<p>So much for rich snippets. </p>

<p>More recently I came across <code>rel=author</code>, and again I've been quite excited to try it out. This time I checked before-hand and found a handful of webby types who've got this working on their blogs. Here's what they look like:</p>

<p><img src="https://lh4.googleusercontent.com/-j1PTvhmppyU/Ts7XnanwE-I/AAAAAAAAHxs/N4Z7toDlRN0/s600/rel-author-search-listing.png" alt="google search listing with rel=author" /></p>

<p>A couple of weeks later I'm still having a bit of a trial getting this to work. I've done the setup exactly as described by google and a bunch of these other guys who've got it working - no joy. I'm using the three-way setup as follows:</p>

<ul>
<li>From each blog post, link to my about page with rel="author" (I've linked the lego man image at top-right in the header).</li>
<li>From my about page, link to my google profile with rel="me" (I have two links, one <code>&lt;link rel="me"&gt;</code> in the <code>&lt;head&gt;</code>, and one in an <code>&lt;a rel="me" ..</code> in the G+ icon in the navigation bar just below the header.</li>
<li>From my google profile, create a contributes-to link back to my about page.</li>
</ul>

<p>The reason for this set of reciprocal links is so that google can trust that the content really is produced by you, and its no hard-ship to set up. Except that for some reason I can't fathom it just <em>doesn't work for me</em>.</p>

<p>The rich-snippets testing tool gives me the all-clear, and even shows an example search listing:</p>

<p><img src="https://lh3.googleusercontent.com/-DKGP9ZJF8G0/Ts7aVKcwJiI/AAAAAAAAHyE/ZHCauxKCvYM/s600/rich-snippets-search-listing.png" alt="" /></p>

<p>I've tried about a dozen variants now, each time waiting for a re-index before trying something different (you can tell when you've been indexed using Google's <a href="http://www.google.com/webmasters/tools/">Webmaster Tools</a>).</p>

<p>So far I've tried:</p>

<ul>
<li>Relative links between blog-post and about page</li>
<li>Absolute links between blog-post and about page</li>
<li>All links as <code>&lt;link&gt;</code> elements in the <code>&lt;head&gt;</code></li>
<li>All links as <code>&lt;a&gt;</code> elements in the page <code>&lt;body&gt;</code></li>
<li>All combinations of the above alternatives</li>
</ul>

<p>I have a few remaining alternatives in the works. One is to remove all rel=me links to profiles other than google (I currently also have twitter and linked-in profiles linked with rel=me). </p>

<p>Another is to add a link to my google+ profile in an <code>&lt;a href="https://plus.google.com/105248011271585565954?rel=author"&gt;Steve+&lt;/a&gt;</code> (yes, with the + at the end of the link text - see <a href="http://www.google.com/support/webmasters/bin/answer.py?answer=1408986">option 2, here</a>). </p>

<p>There's also <a href="https://spreadsheets.google.com/spreadsheet/viewform?formkey=dHdCLVRwcTlvOWFKQXhNbEgtbE10QVE6MQ">this form</a> which sounds tantalisingly like it might be a necessary part of the process, and which I hadn't previously seen mentioned anywhere. I've submitted the form, but a bit of googling suggests that it will make no difference.</p>
</span>

              <ul class="keywords">
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=rel=author">rel=author</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=rich snippets">rich snippets</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=microformats">microformats</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=schema.org">schema.org</a></li>
              </ul>
              <div style="clear:both"></div>

	        <a href="microformats_rich_snippets_rel_author_and_search_listings.html">Comment on this post</a>

            </div>
	    <div class="article" itemscope itemtype="http://schema.org/BlogPosting" inLanguage="en-GB" isFamilyFriendly="true" wordCount="579" description="How to create a CSS selector that does not match for individual uses of the classes, but matches on elements that are assigned the union of the css classes">
              <span class="meta" itemprop="datePublished"><time datetime="2011-11-24">November 24, 2011</time></span>
              <a itemprop="url" href="a_multi_class_union_css_selector.html"><h1 itemprop="name" itemprop="headline">A multi-class union CSS selector</h1></a>
	      <span itemprop="articleBody"><p><style> <br />
  .urgent { color:red; }
  .important { font-weight:bold; }
  .urgent.important { font-style:italic; }
</style>
Several times while working on the styling of this blog I've wanted to style elements differently when the complete combination or set union of css classes are used on the same element. If the css classes are applied separately the style should not apply. Until today I didn't realise that this is, in fact, both possible and easy to achieve.</p>

<p>Here's the html I want to be able to write:</p>

<pre><code>&lt;div class="urgent"&gt;something urgent&lt;/div&gt;
&lt;div class="important"&gt;something important&lt;/div&gt;
&lt;div class="urgent important"&gt;urgent &amp; important&lt;/div&gt;
</code></pre>

<p>And this is how that should look:</p>

<div class="example">
  <div class="urgent">something urgent</div>
  <div class="important">something important</div>
  <div class="urgent important">urgent & important</div>
</div>

<p>The urgent &amp; important text should be bold, red and italic in your browser. Notice that neither the "urgent" or the "important" are italic - that only comes when both css classes combine on the same element.</p>

<p>Here are three ways you can achieve the effect. Make sure you get to option-3, even if you have to skip options 1 and 2 (hint: they both suck).</p>

<h3>Option 1: specific, separate css class</h3>

<pre><code>&lt;style&gt;
  .urgent { color:red; }
  .important { font-weight:bold; }
  .both   { font-style:italic; }
&lt;/style&gt;

&lt;div class="urgent"&gt;Red Text&lt;/div&gt;
&lt;div class="important"&gt;Bold Red Text&lt;/div&gt;
&lt;div class="urgent important both"&gt;Bold Italic Red Text&lt;/div&gt;
</code></pre>

<p>This is nasty. I want to define my css classes to be as orthogonal and meaningful as possible, and while creating my html markup I do not want to be "mixing concerns" that should be kept separate.</p>

<h3>Option 2: nested html tags and ancestry selectors</h3>

<pre><code>&lt;style&gt;
  .urgent { color:red; }
  .important { font-weight:bold; }
  .urgent .important { font-style:italic }
&lt;/style&gt;

&lt;div class="urgent"&gt;Red Text&lt;/div&gt;
&lt;div class="important"&gt;Bold Red Text&lt;/div&gt;
&lt;div class="urgent"&gt;
  &lt;div class="important"&gt;Bold Italic Red Text&lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>Double nasty, take it away! Now I've had to change my html markup to nest <code>.important</code> under <code>.urgent</code>, just so I can style things as I want them. It also doesn't work if I nest them the other way around. This is really stupid and annoying: styling should be separate from markup.</p>

<p>OK, so here's the right way to do it, and I just can't believe it took me so long to feel the pain hard enough to go looking for a solution...</p>

<h3>Option 3: use the union selector</h3>

<pre><code>&lt;style&gt;
  .urgent { color:red; }
  .important { font-weight:bold; }
  .urgent.important { font-style:italic; }
&lt;/style&gt;

&lt;div class="urgent"&gt;Red Text&lt;/div&gt;
&lt;div class="important"&gt;Bold Text&lt;/div&gt;
&lt;div class="urgent important"&gt;Bold Italic Red Text&lt;/div&gt;
</code></pre>

<p>The difference in the css declaration between option-2 and option-3 is so small I'll point it out, just in case you missed it: </p>

<ul>
<li>the union selector uses <em>both</em> class names <em>without</em> the space separating them - like this <code>.urgent.important</code>.</li>
<li>whereas the example in option-2 <code>.urgent .important</code> separates the two classes with a space, and matches on an element with <code>.important</code> descending from an element with <code>.urgent</code>.</li>
</ul>

<p>CSS can be a thumping great pain, but just occasionally it comes up trumps.</p>
</span>

              <ul class="keywords">
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=css">css</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=selector">selector</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=union">union</a></li>
              </ul>
              <div style="clear:both"></div>

	        <a href="a_multi_class_union_css_selector.html">Comment on this post</a>

            </div>
	    <div class="article" itemscope itemtype="http://schema.org/BlogPosting" inLanguage="en-GB" isFamilyFriendly="true" wordCount="1,218" description="Description, code and sample images from various image processing techiques aiming at producing a bitmap with a vectorised appearance">
              <span class="meta" itemprop="datePublished"><time datetime="2011-11-19">November 19, 2011</time></span>
              <a itemprop="url" href="weighted_average_smoothing_with_java2d.html"><h1 itemprop="name" itemprop="headline">Weighted Average smoothing with Java2d</h1></a>
	      <span itemprop="articleBody"><p>Since my <a href="">original post</a> I've done a little bit more playing with processing images to try to give them a "vectorised" look. I really didn't change much, just played with the algorithm for choosing pixel colour. The algorithms all work by examining the colours of the current and surrounding pixels to determine what colour to paint the current pixel. The colour selection is performed by classes that implement the following simple interface:   </p>

<pre><code>interface Counter {
    // add a colour channel value for one of 
    // the neighbouring pixels
    public void add(int aValue);

    // calculates the value we should use
    // for the current colour channel of the
    // current pixel based on its neighbours
    public int mostFrequent();
}
</code></pre>

<p>The client code that deals this interface invokes the add method 3 times for each pixel - once for each colour channel (red / green /blue). The client code looks like this:</p>

<pre><code>// calculate the colour 
private int count(int anOffset, int[] aSurrounding) {
    Counter _c = getCounter();
    int _length = aSurrounding.length-(2-anOffset);
    for (int i=anOffset; i&amp;lt;_length; i+=3) {
        _c.add(aSurrounding[i]);
    }
    return _c.mostFrequent();
}
</code></pre>

<p>Here you can see that I can easily supply different implementations of Counter, so I can try different algorithms easily.</p>

<h3>The original colour-selection algorithm</h3>

<p>The original algorithm simply takes the most frequent value of each colour channel so that, for example, if 51% of the surrounding pixels are bright blue, and the other 49% are bright red, this pixel will be bright red.</p>

<pre><code>class SimpleCounter implements Counter {
    int[] values = new int[256];

    public SimpleCounter() {
        Arrays.fill(values, -1);
    }

    public void add(int aValue) {
        values[aValue] += 1;
    }

    public int mostFrequent() {
        int _highest = -1;
        int _colour = -1;
        for (int i=0; i&amp;lt;256; i++) {
            if (values[i] &amp;gt; _highest) {
            _highest = values[i];
            _colour = i;
            }
        }
        return _colour;
    }
}
</code></pre>

<p>This algorithm does produce the effect I'm looking for, but I get some sharp edges and colour bleeding that I don't really want (see example output below).</p>

<h3>The weighted-average algorithm</h3>

<p>This algorithm weights the values of the surrounding pixels relative to the most common value, so we get a weighted average that does take some account of less popular colours in the neighbourhood of the current pixel.</p>

<pre><code>class WeightedAverageCounter implements Counter {
    int[] values = new int[256];

    public WeightedAverageCounter() {
        Arrays.fill(values, 0);
    }

    public void add(int aValue) {
        values[aValue] += 1;
    }

    public int mostFrequent() {
        int _max = max();
        double _weight=0, _colour=0, _count=0;
        for (int i=0; i&amp;lt;256; i++) {
            if (values[i] &gt; 0) {
                _weight = (((double)values[i]) / _max);
                _weight = Math.pow(_weight, 5);
                _colour += _weight * i;
                _count += _weight;
            }
        }
        return (int) (_colour / _count);
    }

    private int max() {
        int _highest = 0;
        for (int i=0; i&amp;lt;256; i++) {
            if (values[i] &gt; _highest) {
                _highest = values[i];
            }
        }
        return _highest;
    }
}
</code></pre>

<p>The result of the weighted average algorithm is a much smoother colour composition with a reduction in the aliasing effects that can be seen in the more simple algorithm's output. It does have a significant performance penalty however - on my quad core i7 laptop on an image of 600x650 pixels and a 16x16 neighbourhood, the simple algorithm completes in 10 seconds, whereas the weighted-average needs 90 seconds!</p>

<h3>Output for comparison</h3>

<p>Here are some examples for comparison. First is the original image, then then the image processed with the simple colour selection algorithm, followed by the weighted average algorithm.</p>

<p><img alt="The original photograph" width="600" height="654" src="https://lh3.googleusercontent.com/-zPwUf1ZwEes/TsfLHPhDT0I/AAAAAAAAHuI/Rpt4as1QyIE/s600/duck.jpg"></p>

<div class="caption">The original image</div>

<p><img alt="Processed with 'Simple' algorithm" width="600" height="654" src="https://lh6.googleusercontent.com/--uqph05DLD4/TsfLMt4MJ3I/AAAAAAAAHuU/aJ_bXBLOFEw/s600/duck-16x16-simple.png"></p>

<div class="caption">Processed with 'Simple' algorithm</div>

<p><img alt="Processed with 'Weighted Average' algorithm" width="600" height="654" src="https://lh5.googleusercontent.com/-C6hRgaQDTtA/TsfLRfOMKLI/AAAAAAAAHuc/gLLTePCCUfo/s600/duck-16x16-weighted-average.png"></p>

<div class="caption">Processed with 'Weighted Average' algorithm</div>

<p>It might be a little difficult to see the difference, so here's one final composite image showing the difference close-up and side-by-side</p>

<p><img alt="composite - left-side 'simple', right-side 'weighted average'" width="600" height="327" src="https://lh6.googleusercontent.com/-i6hEeV2vdC0/TsfYihtEPaI/AAAAAAAAHu8/Yx2b4FTSvBM/s600/duck-composite.jpg"></p>

<div class="caption">Composite for comparison</div>

<p>The left-side shows the image processed with the simple algorithm, whilst the right-side shows the smoother result of the weighted-average algorithm.</p>
</span>

              <ul class="keywords">
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=Image">Image</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=Processing">Processing</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=Java2D">Java2D</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=Convolve">Convolve</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=Kernel">Kernel</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=Vectorize">Vectorize</a></li>
              </ul>
              <div style="clear:both"></div>

	        <a href="weighted_average_smoothing_with_java2d.html">Comment on this post</a>

            </div>
	    <div class="article" itemscope itemtype="http://schema.org/BlogPosting" inLanguage="en-GB" isFamilyFriendly="true" wordCount="421" description="Description and code samples for a mortgage or loan overpayment calculator written using Google Web Toolkit and progressive enhancement techniques">
              <span class="meta" itemprop="datePublished"><time datetime="2011-11-17">November 17, 2011</time></span>
              <a itemprop="url" href="mortgage_loan_overpayment_calculator.html"><h1 itemprop="name" itemprop="headline">Mortgage/Loan Overpayment Calculator</h1></a>
	      <span itemprop="articleBody"><p>A few weeks back I was talking with someone who was looking into over-paying a loan. The premise is that, provided your lender allows overpayments, by over-paying you can save a fortune in interest payments.</p>

<p>The amount you can save isn't all that straight-forward to work out, due to the miracle that is compound interest. I knocked up a quick <a href="http://www.overpayment-calculator.com/">overpayment calculator</a> using <code>gwt.progressive</code>, which I'm <a href="hosting_a_static_website_in_amazon_s3.html">hosting at Amazon S3</a> with a <a href="pointing_a_domain_name_to_an_amazon_s3_bucket.html">registered domain name</a>.</p>

<p>Here's one of the classes that's being bound - or "activated" if you like - by gwt.progressive:</p>

<pre><code>public class OverpaymentSummary extends Composite {
    interface MyActivator extends WidgetActivator&amp;lt;OverpaymentSummary&gt;{}
    MyActivator activator = GWT.create(MyActivator.class);

    @RuntimeUiWidget(id="saving") InlineLabel saving;
    @RuntimeUiWidget(id="years") InlineLabel years;
    @RuntimeUiWidget(id="months") InlineLabel months;

    public OverpaymentSummary(Element anElement) {
        initWidget(activator.activate(this, anElement));
    }

    public void setResults(
        Money aStandardTotal, int aStandardMonths, 
        Money anOverpaidTotal, int anOverMonths) {
        saving.setText(aStandardTotal.minus(anOverpaidTotal).toString());

        int _monthsSaved = aStandardMonths - anOverMonths;
        setYears(_monthsSaved/12);
        setMonths(_monthsSaved - ((_monthsSaved/12)*12));

        removeStyleName("hidden");
    }

    private void setYears(int aYears) {
        years.setText(""+aYears);
    }

    private void setMonths(int aMonths) {
        months.setText(""+aMonths);
    }
}
</code></pre>

<p>Which is bound onto html that looks like this:</p>

<pre><code>&amp;lt;div class="summary hidden"&gt;By overpaying you could save
&amp;lt;span id="saving"&gt;???&amp;lt;/span&gt;, and reduce your mortgage 
term by &amp;lt;span id="years"&gt;?&amp;lt;/span&gt; years and 
&amp;lt;span id="months"&gt;?&amp;lt;/span&gt; months!&amp;lt;/div&gt;
</code></pre>

<p>Notice the <code>&amp;lt;span&gt;</code> elements with the id's "saving", "years", and "months" - these are bound automatically to the three <code>InlineLabel</code>'s annotated with <code>@RuntimeUiWidget</code>.</p>
</span>

              <ul class="keywords">
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=Mortgage">Mortgage</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=Loan">Loan</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=Overpayment">Overpayment</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=Calculator">Calculator</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=GWT">GWT</a></li>
              </ul>
              <div style="clear:both"></div>

	        <a href="mortgage_loan_overpayment_calculator.html">Comment on this post</a>

            </div>
        </div>
        <div class="sidebar">
          <div>
            <div class="twitter-feed" show="4" account="steveliles">
              <h5>Recent Tweets</h5>            
              <ul class="tweets">
                <li class="tweet-template" style="display:none">        
                  <span class="text"></span>&nbsp;<span class="date" format="yyyy"></span>
                </li>
              </ul>
              <a href="https://twitter.com/steveliles" class="twitter-follow-button" data-show-count="false">Follow @steveliles</a>
	      <script src="//platform.twitter.com/widgets.js" type="text/javascript"></script>
            </div>
          </div>
          <div>
            <a href="article-archive.html"><h5>Recent Posts</h5></a>
            <ul>
                <li><a href="android_2_1_trouble_with_bitmaps.html">Android 2.1 - trouble with bitmaps</a><span class="date"> - Feb 19, 2012</span></li>
                <li><a href="paths_and_selections_in_gimp.html">Paths and Selections in Gimp</a><span class="date"> - Feb 14, 2012</span></li>
                <li><a href="creating_comic_book_style_icons_with_gimp.html">Creating comic-book style icons with Gimp</a><span class="date"> - Feb 12, 2012</span></li>
                <li><a href="creating_ios_style_icons_with_imagemagick.html">Creating iOS style icons with ImageMagick</a><span class="date"> - Jan 27, 2012</span></li>
                <li><a href="invoking_processes_from_java.html">Invoking Processes from Java</a><span class="date"> - Jan 26, 2012</span></li>
            </ul>
            <a href="article-archive.html">Older posts...</a>
          </div>
        </div>
      </div>
      <div class="nav">
        <div class="links">
          <div class="prev"><a title="previous" href="index_3.html">Newer Posts</a></div>
          <div class="next"><a title="next" href="index_5.html">Older Posts</a></div>
        </div>
      </div>
    </div>
    <script type="text/javascript" language="javascript" src="blog/blog.nocache.js"></script>
  </body>
</html>

