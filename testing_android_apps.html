
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <link rel="stylesheet" href="css/styles.css" type="text/css" media="screen"/>
    <link rel="alternate" type="application/rss+xml" title="ExoMemory" href="http://steveliles.github.com/rss.xml" />
    <link href='http://fonts.googleapis.com/css?family=Gochi+Hand' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono:700' rel='stylesheet' type='text/css'>
      <meta name="keywords" content="Android" itemprop="keywords"></meta>
      <meta name="keywords" content="Testing" itemprop="keywords"></meta>
      <meta name="keywords" content="Robotium" itemprop="keywords"></meta>
      <meta name="keywords" content="AppThwack" itemprop="keywords"></meta>
    <meta name="description" content="First impressions of Robotium and AppThwack for testing Android apps and tackling the thorny issue of fragmentation"></meta>
    <script type="text/javascript" src="google-analytics.js"></script>
    <title>Testing Android apps</title>
  </head>
  <body>
    <div>
      <div class="site-header">
        <div class="left">
          <a href="/index.html"><h2>Because I'll forget it if I don't write it down...</h2></a>
        </div>
        <div class="right">
	  <a rel="author" href="http://steveliles.github.com/about_me.html"><img src="images/lego-small.png"></a>
        </div>
      </div>
      <div class="nav">
        <span>
          <a rel="me" href="https://plus.google.com/105248011271585565954"><img src="https://ssl.gstatic.com/images/icons/gplus-16.png" width="16" height="16"></a>
          <a rel="me" href="http://www.twitter.com/steveliles"><img src="http://twitter-badges.s3.amazonaws.com/t_mini-a.png" alt="Follow steveliles on Twitter"></a>
	  <a rel="me" href="http://uk.linkedin.com/in/steveliles"><img src="http://www.linkedin.com/img/webpromo/btn_in_20x15.png" width="20" height="15" alt="View my LinkedIn profile"></a>
	  <form action="http://www.google.com/search" method="get">
            <input type="hidden" name="q" value="site:steveliles.github.com">
            <input type="text" name="q" placeholder="search"></input>
          </form>
	  <a href="rss.xml"><img src="images/rss.png" width="16" height="16" alt="Subscribe to RSS feed"></a>
        </span>
      </div>
      <div class="content">
        <div class="main">
	    <div class="article" itemscope itemtype="http://schema.org/BlogPosting" inLanguage="en-GB" isFamilyFriendly="true" wordCount="1,067" description="First impressions of Robotium and AppThwack for testing Android apps and tackling the thorny issue of fragmentation">
              <span class="meta" itemprop="datePublished"><time datetime="2012-06-08">June 08, 2012</time></span>
              <a itemprop="url" href="testing_android_apps.html"><h1 itemprop="name" itemprop="headline">Testing Android apps</h1></a>
	      <span itemprop="articleBody"><p>I've been developing an Android app as a spare-time project for 6 months now. I have access to 3 Android devices:</p>

<ul>
<li>Samsung Galaxy SII running ICS (my personal mobile)</li>
<li>Samsung Galaxy Mini running Gingerbread (bought as a temporary dev device when my old HTC Desire gave up the ghost)</li>
<li>Motorola Xoom II Media Edition (tablet used for day job)</li>
</ul>

<p>My app runs beautifully on all these devices. I <em>cannot</em> make it crash. It really frustrates me that I get crash reports from other devices and cannot replicate them. For a spare-time project I can't afford to buy lots of devices to test with. Enter <a href="http://www.appthwack.com/">AppThwack</a>.</p>

<h2>AppThwack</h2>

<p>I first heard about AppThwack after I tweeted about one of its competitors - testdroid - trying to find some testimonials from other users. I didn't find any, but I did get a reply from <a href="https://twitter.com/#!/tdpeterson">@tdpeterson</a> inviting me to AppThwack's beta.</p>

<p>Some weeks later I finally found a spare few minutes to take a look, and I'm so glad I did!</p>

<p>As they are currently in beta, you need a code to be able to sign up. Mine arrived a few hours after requesting it, and I immediately signed up to give it a try. The service makes it very easy to get started, which is clever, because once you're in you really are hooked - its just too good.</p>

<h3>Chaos Monkeys</h3>

<p>I uploaded the latest release apk I had to hand and launched the UI Exerciser Monkey tests (these are automatic and randomised tests that poke all the buttons and what-not). From sign-up to running tests took less than 2 minutes.</p>

<p><img style="float:right; margin:25px;" src="https://lh3.googleusercontent.com/-C3vMO8EpKjY/T9I13xsV1VI/AAAAAAAAKQs/v83alvoNCYo/s288/tmpBxqtro.png"></p>

<p>The monkeys found at least two bugs that I was not aware of on that first run. I am torn between horror and delight. The horror and delight turn to embarassment when I realise that I have uploaded an obfuscated apk, and the stack-traces are in gibberese. Lesson#1 right there.</p>

<p>A test run takes a while to complete, but you can watch the results coming in in real time. When you realise what is going on behind the scenes its really impressive: your app is installed, launched, monkeyed, and then uninstalled <em>simultaneously across a whole farm of different devices</em> running different versions of Android. I'd love to see what that looks like :)</p>

<p>You can view the results of your test runs in a number of different ways. I like the "issues by device" mode, which lists all the devices that experienced problems or warnings, and allows you to drill down to see what happened in the monkey log - with a full stack trace of the crash - and then down again into log-cat.</p>

<p>Pause a second and let that sink in. I just ran my app on 43 different devices and Android versions in under 5 mins and now I have instant access to the stack traces from the crashing devices and <em>the full log-cat output</em>. I even get screen-shots from some of the devices - above is from an HTC Evo 4G running 2.3.3. Holy shitcakes!</p>

<p>Oh, and you can filter the log-cat output directly in the web-app. Nice.</p>

<p><img style="margin-left:100px;" src="https://lh6.googleusercontent.com/-_CnnB9TOWeo/T9I7XwlEiKI/AAAAAAAAKRA/Yw3bRzhhmWU/s400/Screen%2520Shot%25202012-06-08%2520at%252018.45.54.png"></p>

<h3>Programmed Tests</h3>

<p>OK, now I have some crashes that I want to try to replicate which are going to involve some complex interactions. Its going to take a lot of chaos monkeys a long time to replicate those tests, but the AppThwack guys have thought of that and integrate Robotium testing too.</p>

<p>Robotium was also new to me, but again its a great tool and a doddle to get started: </p>

<ol>
<li>download the robotium jar from <a href="http://code.google.com/p/robotium/downloads/list">here</a></li>
<li>create an Android test project, set up to test "this" project (<em>not</em> the project you actually want to test)</li>
<li>set the manifest &lt;instrumentation&gt; tag's targetPackage attribute to be the package of the app you want to test</li>
<li>copy the basic test code from <a href="http://robotium.googlecode.com/files/TestAndroidapkfileUsingRobotium.pdf">this tutorial</a> (I confess I find it weird that the tutorial is a pdf, not a web page!)</li>
<li>tweak the test code to test your app - its a very straight-forward API</li>
<li>Run the app you want to test in an emulator</li>
<li>Run your test and watch as it drives your app in the emulator - great fun</li>
</ol>

<p>Once you have a working test that you want to run over at AppThwack's device farm its really easy to get that going too:</p>

<ol>
<li>export a signed apk of the app you want to test (app-under-test)</li>
<li>export a signed apk of the test project (sign with the same key!)</li>
<li>upload app-under-test apk</li>
<li>click the configure icon</li>
<li>click "add test apk", and upload the test project apk</li>
<li>click go</li>
<li>marvel as the results start rolling in</li>
</ol>

<h3>Early days</h3>

<p>I haven't really tried to fix my crashing bugs yet, but at least there is light at the end of the tunnel now, thanks to AppThwack and Robotium.</p>

<p>I noticed a few funnies along the way, which I plan to mention to the AppThwack guys when I've had a bit more experience:</p>

<ul>
<li>Many devices crashed at the same point, but there's no way to collapse common issues together - I found myself opening the log for each device to check the stack-traces to find out the total number of different problems. <em>update: Pawel from AppThwack tells me a new view mode "By Failure" is in the works and will be landing in the beta very soon!)</em></li>
<li>Some devices timed out while installing. I'm not sure if this is a problem with my app (seems unlikely?) or some issue with the devices themselves? Its not a catastrophe if its a device problem, but then probably they should be marked as warnings rather than errors. <em>update: Pawel confirmed there were timeouts within the device-farm which I'm sure they'll resolve soon</em></li>
<li>I noticed lots of these in the monkey logs: <code>java.io.FileNotFoundException: /mnt/sdcard/scriptlog.txt (Permission denied)</code> which seem to be just noise (at least as far as I am concerned)</li>
</ul>

<p>So far so wonderful as far as I'm concerned: my thanks to Trellis Automation for AppThwack, and I really hope the beta goes well and the business is successful! </p>
</span>

              <ul class="keywords">
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=Android">Android</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=Testing">Testing</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=Robotium">Robotium</a></li>
                  <li><a itemprop="keywords" href="http://www.google.com/search?q=site:steveliles.github.com&q=AppThwack">AppThwack</a></li>
              </ul>
              <div style="clear:both"></div>


                <a name="comments"></a>
                <div id="disqus_thread"></div>
 	        <script type="text/javascript">    	     
	          var disqus_shortname = 'steveliles';
	          (function() {
	            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	          })();
	        </script>
	        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

                <div class="sharing">
		  <ul>
		    <li><a href="http://twitter.com/share?text=@steveliles" class="twitter" target="top">Tweet</a></li>
		    <li class="gplus"><g:plusone size="small" annotation="none"></g:plusone></li>
	          </ul>
                </div>
                
                <script type="text/javascript">
                  window.___gcfg = {lang: 'en-GB'};
                  (function() {
                    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                    po.src = 'https://apis.google.com/js/plusone.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                  })();
                </script>


            </div>
        </div>
        <div class="sidebar">
          <div>
            <div class="twitter-feed" show="4" account="steveliles">
              <h5>Recent Tweets</h5>            
              <ul class="tweets">
                <li class="tweet-template" style="display:none">        
                  <span class="text"></span>&nbsp;<span class="date" format="yyyy"></span>
                </li>
              </ul>
              <a href="https://twitter.com/steveliles" class="twitter-follow-button" data-show-count="false">Follow @steveliles</a>
	      <script src="//platform.twitter.com/widgets.js" type="text/javascript"></script>
            </div>
          </div>
          <div>
            <a href="article-archive.html"><h5>Recent Posts</h5></a>
            <ul>
                <li><a href="roman_numeral_conversion_in_clojure_part_ii.html">Roman numeral conversion in Clojure, part II</a><span class="date"> - Mar 03, 2013</span></li>
                <li><a href="roman_numeral_conversion_in_clojure.html">Roman numeral conversion in Clojure</a><span class="date"> - Feb 28, 2013</span></li>
                <li><a href="gwt_i18n_using_browser_locale.html">GWT i18n using browser locale</a><span class="date"> - Feb 27, 2013</span></li>
                <li><a href="cross_domain_inter_frame_communication_in_javascript.html">Cross-domain inter-frame communication in javascript</a><span class="date"> - Feb 05, 2013</span></li>
                <li><a href="subversion_1_7_eclipse_integration_in_ubuntu_12.html">Subversion 1.7 Eclipse integration in Ubuntu 12</a><span class="date"> - Nov 13, 2012</span></li>
            </ul>
            <a href="article-archive.html">Older posts...</a>
          </div>
        </div>
      </div>
      <div class="nav">
        <div class="links">
          <div class="prev"><a title="previous" href="android_activity_lifecycle_gotcha.html">Android Activity Lifecycle ...</a></div>
          <div class="next"><a title="next" href="minimum_viable_products.html">Minimum Viable Products</a></div>
        </div>
      </div>
    </div>
    <script type="text/javascript" language="javascript" src="blog/blog.nocache.js"></script>
  </body>
</html>
